<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [zapps-wg] Trusted Rust build process is ready for evaluation
   </TITLE>
   <LINK REL="Index" HREF="/pipermail/zapps-wg/2018/index.html" >
   <LINK REL="made" HREF="mailto:zapps-wg%40lists.zfnd.org?Subject=Re%3A%20%5Bzapps-wg%5D%20Trusted%20Rust%20build%20process%20is%20ready%20for%20evaluation&In-Reply-To=%3CCAB0O3SXKPjF34A5xkakAdBxemA1RosinQ0PH%2BBNCpJCBZv6xTQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000335.html">
   <LINK REL="Next"  HREF="000181.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[zapps-wg] Trusted Rust build process is ready for evaluation</H1>
    <B>Devrandom</B> 
    <A HREF="mailto:zapps-wg%40lists.zfnd.org?Subject=Re%3A%20%5Bzapps-wg%5D%20Trusted%20Rust%20build%20process%20is%20ready%20for%20evaluation&In-Reply-To=%3CCAB0O3SXKPjF34A5xkakAdBxemA1RosinQ0PH%2BBNCpJCBZv6xTQ%40mail.gmail.com%3E"
       TITLE="[zapps-wg] Trusted Rust build process is ready for evaluation">c1.devrandom at niftybox.net
       </A><BR>
    <I>Mon Jan  8 13:27:57 EST 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="000335.html">[zapps-wg] Powers of Tau Attestation
</A></li>
        <LI>Next message (by thread): <A HREF="000181.html">[zapps-wg] Trusted Rust build process is ready for evaluation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#180">[ date ]</a>
              <a href="thread.html#180">[ thread ]</a>
              <a href="subject.html#180">[ subject ]</a>
              <a href="author.html#180">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Sean,

How is it going with the evaluation?

I'm concerned because rounds are continuing, yet participants are using
versions of Rust of unknown provenance.  In fact, everybody might be using
Rust with a common ancestor compiler, so that we have a single point of
failure.


On Thu, Dec 7, 2017 at 11:10 AM Devrandom &lt;<A HREF="/mailman/listinfo/zapps-wg">c1.devrandom at niftybox.net</A>&gt; wrote:

&gt;<i> It looks like the result is pretty far from deterministic.  In fact, I see
</I>&gt;<i> 20,000+ lines of difference in diffoscope.
</I>&gt;<i>
</I>&gt;<i> So it looks like each participant will have to build their own toolchain.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Tue, Dec 5, 2017 at 4:44 PM Sean Bowe &lt;<A HREF="/mailman/listinfo/zapps-wg">sean at z.cash</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> That would be nice!
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> What other obstacles are there for fully deterministic builds? It
</I>&gt;&gt;<i> seems like it would be a good idea to toss a few features in (like
</I>&gt;&gt;<i> that one) and make some kind of &quot;release&quot; binaries for people to use
</I>&gt;&gt;<i> which have been scrutinized and built in this reproducible way.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I hopefully will run into some time soon where I can audit the changes
</I>&gt;&gt;<i> you made to the code and dependencies, play with the build, do
</I>&gt;&gt;<i> comparisons and so forth. This is exciting!
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Sean
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Tue, Dec 5, 2017 at 5:20 PM, Devrandom &lt;<A HREF="/mailman/listinfo/zapps-wg">c1.devrandom at niftybox.net</A>&gt;
</I>&gt;&gt;<i> wrote:
</I>&gt;&gt;<i> &gt; Verification passed (in fact, new_challenge was identical).
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; BTW, would be nice if `compute` had a flag to only take entropy from
</I>&gt;&gt;<i> STDIN,
</I>&gt;&gt;<i> &gt; so that we can check for any differences in the response.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; On Tue, Dec 5, 2017 at 12:48 PM Devrandom &lt;<A HREF="/mailman/listinfo/zapps-wg">c1.devrandom at niftybox.net</A>&gt;
</I>&gt;&gt;<i> wrote:
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; Thank you.  Will do the verification shortly.
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; Also, I've updated the instructions in
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> <A HREF="https://github.com/devrandom/powersoftau/wiki/Trusted-build-instructions-via-mrustc">https://github.com/devrandom/powersoftau/wiki/Trusted-build-instructions-via-mrustc</A>
</I>&gt;&gt;<i> &gt;&gt; to use the cargo built by mrustc.  This required vendoring of the
</I>&gt;&gt;<i> &gt;&gt; dependencies.
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; On Tue, Dec 5, 2017 at 11:24 AM Sean Bowe &lt;<A HREF="/mailman/listinfo/zapps-wg">sean at z.cash</A>&gt; wrote:
</I>&gt;&gt;<i> &gt;&gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;&gt; Excellent work! :)
</I>&gt;&gt;<i> &gt;&gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;&gt; new, compute, verify_transform is a good demonstration. I would
</I>&gt;&gt;<i> &gt;&gt;&gt; verify_transform with a binary compiled with the normal Rust compiler
</I>&gt;&gt;<i> &gt;&gt;&gt; to double-check.
</I>&gt;&gt;<i> &gt;&gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;&gt; Sean
</I>&gt;&gt;<i> &gt;&gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;&gt; On Tue, Dec 5, 2017 at 11:59 AM, Devrandom &lt;<A HREF="/mailman/listinfo/zapps-wg">c1.devrandom at niftybox.net</A>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;&gt;&gt; wrote:
</I>&gt;&gt;<i> &gt;&gt;&gt; &gt; Hi all,
</I>&gt;&gt;<i> &gt;&gt;&gt; &gt;
</I>&gt;&gt;<i> &gt;&gt;&gt; &gt; I was able to build rustc completely from sources.  This means no
</I>&gt;&gt;<i> &gt;&gt;&gt; &gt; network
</I>&gt;&gt;<i> &gt;&gt;&gt; &gt; access during the build and without any Rust distributed binaries.
</I>&gt;&gt;<i> &gt;&gt;&gt; &gt;
</I>&gt;&gt;<i> &gt;&gt;&gt; &gt; The steps are here:
</I>&gt;&gt;<i> &gt;&gt;&gt; &gt;
</I>&gt;&gt;<i> &gt;&gt;&gt; &gt;
</I>&gt;&gt;<i> &gt;&gt;&gt; &gt;
</I>&gt;&gt;<i> <A HREF="https://github.com/devrandom/powersoftau/wiki/Trusted-build-instructions-via-mrustc">https://github.com/devrandom/powersoftau/wiki/Trusted-build-instructions-via-mrustc</A>
</I>&gt;&gt;<i> &gt;&gt;&gt; &gt;
</I>&gt;&gt;<i> &gt;&gt;&gt; &gt; I'm still looking into building a cargo binary that supports TLS, to
</I>&gt;&gt;<i> &gt;&gt;&gt; &gt; eliminate the need to download it for building powersoftau itself.
</I>&gt;&gt;<i> &gt;&gt;&gt; &gt; Worst
</I>&gt;&gt;<i> &gt;&gt;&gt; &gt; case we can use a shell script.
</I>&gt;&gt;<i> &gt;&gt;&gt; &gt;
</I>&gt;&gt;<i> &gt;&gt;&gt; &gt; Would like to merge <A HREF="https://github.com/ebfull/pairing/pull/72">https://github.com/ebfull/pairing/pull/72</A> so
</I>&gt;&gt;<i> that
</I>&gt;&gt;<i> &gt;&gt;&gt; &gt; we
</I>&gt;&gt;<i> &gt;&gt;&gt; &gt; don't have to maintain a separate patch for Rust 1.19 compatibility.
</I>&gt;&gt;<i> &gt;&gt;&gt; &gt;
</I>&gt;&gt;<i> &gt;&gt;&gt; &gt; Sean, what is the best method of validating that the generated
</I>&gt;&gt;<i> binary
</I>&gt;&gt;<i> &gt;&gt;&gt; &gt; works
</I>&gt;&gt;<i> &gt;&gt;&gt; &gt; correctly?  Just use &quot;new&quot;, then &quot;compute&quot; and then
</I>&gt;&gt;<i> &quot;verify_transform&quot;?
</I>&gt;&gt;<i> &gt;&gt;&gt; &gt;
</I>&gt;&gt;<i> &gt;&gt;&gt; &gt; Also, I found that the generated binary is *very* different from the
</I>&gt;&gt;<i> &gt;&gt;&gt; &gt; one
</I>&gt;&gt;<i> &gt;&gt;&gt; &gt; generated by the downloadable Rust compiler.  This is somewhat
</I>&gt;&gt;<i> &gt;&gt;&gt; &gt; worrisome,
</I>&gt;&gt;<i> &gt;&gt;&gt; &gt; although it doesn't affect us if we use the mrustc path.  Will
</I>&gt;&gt;<i> spend a
</I>&gt;&gt;<i> &gt;&gt;&gt; &gt; bit
</I>&gt;&gt;<i> &gt;&gt;&gt; &gt; more time to get to the bottom of it.
</I>&gt;&gt;<i> &gt;&gt;&gt; &gt;
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="000335.html">[zapps-wg] Powers of Tau Attestation
</A></li>
	<LI>Next message (by thread): <A HREF="000181.html">[zapps-wg] Trusted Rust build process is ready for evaluation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#180">[ date ]</a>
              <a href="thread.html#180">[ thread ]</a>
              <a href="subject.html#180">[ subject ]</a>
              <a href="author.html#180">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="/mailman/listinfo/zapps-wg">More information about the zapps-wg
mailing list</a><br>
</body></html>
